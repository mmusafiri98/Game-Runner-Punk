<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Runner Punk</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: burlywood;
            margin: 0;
            padding: 0;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-top: 20px;
        }

        .game-container {
            width: 100%;
            max-width: 600px;
            height: 300px;
            border: 2px solid #000;
            background: linear-gradient(to bottom, #87CEEB, #87CEFA);
            overflow: hidden;
            position: relative;
            margin: 20px auto;
        }

        #gameArea {
            position: relative;
            width: 100%;
            height: 100%;
        }

        #character {
            position: absolute;
            bottom: 40px;
            left: 50px;
            width: 100px;
            height: 100px;
            background: url('punk_run.gif') no-repeat center/contain;
        }

        .grass {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40px;
            background-color: green;
        }

        .sun {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
            background-color: yellow;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(255, 223, 0, 0.8);
        }

        .obstacle {
            width: 30px;
            height: 30px;
            background-color: #8B0000;
            position: absolute;
            bottom: 40px;
            right: -30px;
            animation: moveObstacle 3s linear infinite;
        }

        @keyframes moveObstacle {
            0% {
                right: -30px;
            }

            100% {
                right: 600px;
            }
        }

        /* Styles des boutons */
        #keyboard {
            position: fixed;
            bottom: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        #keyboard button {
            background: #ddd;
            border: 2px solid #aaa;
            border-radius: 5px;
            padding: 10px 20px;
            font-size: 20px;
            cursor: pointer;
        }

        #keyboard button:hover {
            background: #bbb;
        }

        #right,
        #up,
        #Pause,
        #start,
        #Restart {
            animation: blink 0.7s steps(2, start) infinite;
            background: rgb(6, 36, 53);
            border-radius: 2px;
            color: rgb(58, 26, 133);
            cursor: pointer;
            font-size: 28px;
        }
    </style>
</head>

<body>
    <h1>Game Runner Punk</h1>

    <!-- Musica di sottofondo -->
    <audio id="background-music" loop autoplay>
        <source src="Blue Space v0_8.mp3" type="audio/mp3">
        Il tuo browser non supporta il tag audio.
    </audio>

    <div class="game-container">
        <!-- Soleil -->
        <div class="sun"></div>

        <!-- Herbe -->
        <div class="grass"></div>

        <div id="gameArea">
            <!-- Personnage -->
            <div id="character"></div>
            <!-- Obstacle -->
            <div class="obstacle"></div>
        </div>
    </div>

    <!-- Boutons -->
    <div id="keyboard" class="container">
        <div class="row">
            <div class="col-4 d-flex justify-content-center">
                <button id="right" class="btn btn-secondary w-100">Right</button>
            </div>
            <div class="col-4 d-flex justify-content-center">
                <button id="up" class="btn btn-secondary w-100">Up</button>
            </div>
            <div class="col-4 d-flex justify-content-center">
                <button id="start" class="btn btn-success w-100">Start</button>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-6 d-flex justify-content-center">
                <button id="Pause" class="btn btn-warning w-100">Pause</button>
            </div>
            <div class="col-6 d-flex justify-content-center">
                <button id="Restart" class="btn btn-danger w-100">Restart</button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS (Optional for responsive behavior) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const character = document.getElementById('character');
        const obstacle = document.querySelector('.obstacle');
        const startButton = document.getElementById('start');
        const pauseButton = document.getElementById('Pause');
        const restartButton = document.getElementById('Restart');
        const backgroundMusic = document.getElementById('background-music');

        let isRunning = false;
        let isPaused = false;

        // Variabili per la posizione del personaggio
        let characterX = 50; // Posizione orizzontale iniziale
        let characterY = 40; // Altezza rispetto all'erba

        const speedX = 10; // Velocità di movimento orizzontale
        const jumpHeight = 80; // Altezza del salto
        let isJumping = false;

        // Iniziare il gioco
        startButton.addEventListener('click', () => {
            if (isRunning) return;

            // Avviare l'animazione dell'ostacolo
            obstacle.style.animationPlayState = 'running';
            isRunning = true;

            // Avviare la musica
            backgroundMusic.play();
        });

        // Pausa o ripresa del gioco
        pauseButton.addEventListener('click', () => {
            if (!isRunning) return;

            if (isPaused) {
                obstacle.style.animationPlayState = 'running';
                pauseButton.textContent = 'Pause';
                backgroundMusic.play();
                isPaused = false;
            } else {
                obstacle.style.animationPlayState = 'paused';
                pauseButton.textContent = 'Continue';
                backgroundMusic.pause(); // Fermare la musica durante la pausa
                isPaused = true;
            }
        });

        // Riavviare il gioco
        restartButton.addEventListener('click', () => {
            isRunning = false;
            isPaused = false;
            pauseButton.textContent = 'Pause';

            character.style.left = '50px';
            obstacle.style.animation = 'none';
            setTimeout(() => {
                obstacle.style.animation = '';
                obstacle.style.animationPlayState = 'paused';
            }, 10);

            // Fermare la musica e riavviarla
            backgroundMusic.currentTime = 0;
            backgroundMusic.play();
        });

        // Movimento a destra
        document.getElementById('right').addEventListener('click', () => {
            if (!isRunning) return; // Si muove solo se il gioco è avviato
            characterX += speedX;
            character.style.left = `${characterX}px`;
        });

        // Salto
        document.getElementById('up').addEventListener('click', () => {
            if (!isRunning || isJumping) return; // Salta solo se il gioco è avviato
            isJumping = true;

            character.style.transition = 'bottom 0.3s ease-out';
            character.style.bottom = `${characterY + jumpHeight}px`;

            setTimeout(() => {
                character.style.bottom = `${characterY}px`;
                isJumping = false;
            }, 300);
        });
    </script>
</body>

</html>
